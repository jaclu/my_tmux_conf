#!/usr/bin/env bash
# This is sourced. Fake bang-path to help editors and linters
# shellcheck disable=SC2034  # don't warn about unused variables
# shellcheck disable=SC2154  # don't warn about unassigned variables

if [[ -f /etc/debian_version ]] && grep -q 10 /etc/debian_version; then
    # the older versions here gives false positives
    skip_linters+=(
        codespell
        pylint
    )
fi

skip_linters+=(
    ansible-lint # not needed here
    checkbashisms
)

#
#  Handling what files should be skipped by olint
#

excluded_prefixes+=(
    # tmux_conf/dead/code
    stuff/dead_code.py
)

# Explicit excludes, give entire filepath as listed by olint
excludes+=(
    stuff/color_tests/24-bit-color.sh
)

# no extra proj linters:
# full lint: 1:12.19 1:11.53 1:12.25 1:13.13 1:12.06
# additional: 1.1 1.1 1.2
#
# using the extra proj linters
# full lint: 37.4 36.0 37.7 37.0
# additional: 6.2 6.4 6.4 6.4

project_linters+=(
    # py lintes, keeping one fast as a per file linter
    # if no ruff, black will be used
    # ruff # 90
    # black # 80
    isort       # 90
    flake8      # 70
    pycodestyle # 70
    pyflakes    # 60
    pyright     # 40
    mypy        # 30
    pylint      # 20
    bandit      # 10

    # markdown linters
    markdownlint
    pymarkdown
)

# Avioid getting codespell error for THIRDPARTY in pyproject.toml
override_linter_cmd["codespell"]="codespell -H -S './.git,./.venv,./.mypy_cache' -L THIRDPARTY"
